# 調査

本ドキュメントは、Twitter カスタマイズ Chrome 拡張機能の開発に向けた調査結果をまとめるものである。

## 1. Chrome拡張機能の基本構成

Chrome拡張機能は、主に以下のファイルで構成される。

- **`manifest.json`**:
  - 拡張機能の基本的な情報（名前、バージョン、説明など）や、必要な権限（permissions）、使用するスクリプトなどを定義する設定ファイル。
  - 拡張機能の核となる最も重要なファイル。
- **コンテンツスクリプト (`content_scripts`)**:
  - 特定のウェブページ（今回はTwitter）のコンテキストで実行されるJavaScriptファイル。
  - ウェブページのDOMにアクセスし、リツイートの非表示やスタイルの変更など、ページのコンテンツを直接操作するために使用する。
- **ポップアップ (`action`)**:
  - ユーザーがChromeのツールバーにある拡張機能のアイコンをクリックした際に表示されるHTMLファイル。
  - リツイートの表示/非表示を切り替えるスイッチなど、ユーザーインターフェースを提供する。
- **ストレージ (`storage`)**:
  - 拡張機能の設定（例：リツイートを非表示にするかどうかの状態）をユーザーのブラウザに保存するための機能。
  - `chrome.storage.local` API を使用して、設定を永続化する。

## 2. 必要な権限 (`permissions`)

`manifest.json` で、拡張機能が使用するAPIへのアクセス許可を宣言する必要がある。

- **`storage`**: ユーザーの設定を保存・読み込みするために必須。
- **`scripting`**: 特定の条件下でコンテンツスクリプトを実行するために必要。
- **`activeTab`**: 現在アクティブなタブに対して一時的なアクセス権を取得する。今回は特定のサイト（Twitter）で動作させるため、`host_permissions` の方がより適切かもしれない。

## 3. Manifest V3

現在、Chrome拡張機能は Manifest V3 が主流となっている。V2とはサービスワーカーの導入などいくつかの違いがあるため、V3の仕様に沿って開発を進める。